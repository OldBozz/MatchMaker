@page "/Teams"
@using MatchMakerLib.MatchMakerModel;
@using MatchMakerPro.Data;
@using MatchMakerPro.Pages.Dialogs;

@inject NavigationManager NavigationManager
@inject MatchMakerDbContext dbcontext
@inject IDialogService DialogService

<MudContainer Class="mt-4">
    <MudText Typo="Typo.h4" Class="mb-4" Align="MudBlazor.Align.Center" GutterBottom="true">Teams</MudText>
    <MudButton @onclick="OpenAddElementDialog" Variant="Variant.Filled" Color="MudBlazor.Color.Primary">
        Add Team
    </MudButton>
    <MudDataGrid T="Team" Items="@(dbcontext.Teams.ToList())" ReadOnly="false" EditMode="DataGridEditMode.Form"
                 Bordered="true" Dense="true" Hover="true" Striped="true" EditTrigger="DataGridEditTrigger.OnRowClick" SortMode="SortMode.None">
        <Columns>
            <PropertyColumn Property="x => x.Name" />
        </Columns>
    </MudDataGrid>
</MudContainer>
@code {
    private async Task<DialogResult> OpenAddElementDialog()
    {
        var options = new DialogOptions { CloseOnEscapeKey = true };
        var parameters = new DialogParameters();
        parameters.Add("Element", new Team());
        parameters.Add("ElementType", "Team");

        var dialog = await DialogService.ShowAsync<AddMatchMakerElementDialog>("Confirm", parameters, options);
        return await dialog.Result;
    }
}
